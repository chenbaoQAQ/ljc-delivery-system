# 🚚 老乡鸡配送数据自动化审计系统 (Million-level Data Engine)

## 📌 项目简介
本项目专为大型连锁餐饮（老乡鸡）设计，旨在处理 **2014-2026 年（跨度 12 年）** 的全量门店配送明细。系统核心解决了在**亿级数据规模**下的数据导入幂等性、审计状态自动判定及高性能报表查询问题。

## 🚀 技术亮点（面试核心）

### 1. 海量数据异步批处理架构
* **流式解析**：采用 `BufferedReader` 流式读取百万级 CSV 文件，避免 OOM（内存溢出）。
* **批量入库**：使用 MyBatis Plus `saveBatch` 策略（每 1000 条/批），极大降低了磁盘 I/O 开销。

### 2. 数据幂等与版本控制 (UUID 机制)
* **批次管理**：引入 `batch_no` (UUID) 标签，为每一批次导入提供唯一“身份证”。
* **秒级回滚**：支持基于月份前缀的“全量覆盖式导入”，确保数据不重不漏，支持错误批次的精准回滚。

### 3. 亿级数据查询性能优化
* **复合索引**：针对 `(date, shop_id)` 建立复合索引，利用 **左前缀原则** 和 **索引覆盖 (Covering Index)**。
* **降维打击**：将原始查询延迟从分钟级优化至 **300ms 以内**，即使在数据量过亿的极端环境下依然保持秒开。

### 4. 自动化审计逻辑
* **状态判定**：系统自动比对“配送底稿”与“实际明细”，动态生成 `0A/0B/C` 等审计状态，代替人工对账。

## 🛠️ 数据库设计

* `delivery_detail`: 事实表，存储亿级配送明细。
* `shop_delivery_status`: 底稿表，存储门店预设排班。

## 📊 性能表现
* **导入速度**：百万级数据入库约 XX 秒。
* **查询延迟**：亿级全表环境下，单月报表响应 < 500ms (基于 EXPLAIN 优化)。